services:
  - type: background
    name: nija-trading-bot
    env: python
    region: oregon
    plan: starter
    buildCommand: |
      python3 -m venv .venv
      . .venv/bin/activate
      python3 -m pip install --upgrade pip
      python3 -m pip install -r requirements.txt
      python3 -m pip install coinbase-advanced-py==1.8.2
    startCommand: |
      . .venv/bin/activate
      uvicorn main:app --host 0.0.0.0 --port ${PORT:-10000}
    envVars:
      - key: API_KEY
        fromSecret: COINBASE_API_KEY
      - key: API_SECRET
        fromSecret: COINBASE_API_SECRET
    pythonVersion: "3.13"
